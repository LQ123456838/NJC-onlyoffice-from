name: .deb-package build

on:
  workflow_call:
  push: {branches: ["feature/Documentserver-plugins-deb-rpm"]}
  workflow_dispatch:
    
jobs:
  build:
    name: Build package
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Get control files
        run: |
          pwd
          git clone git@github.com:Elshirak/onlyoffice.github.io.git --branch feature/Documentserver-plugins-deb-rpm
          cd onlyoffice.github.io/sdkjs-plugins/packages/deb
          pwd
        shell: bash
          
      - name: Build package
        run: |
          dpkg-builpackage -b -uc -us
          ls -la ../
          pwd
          pwd ..
        shell: bash

